{
    "sourceFile": "Assets/Scripts/Block/TargetBlock.cs",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 1,
            "patches": [
                {
                    "date": 1771535637238,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1771638679695,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,35 +1,88 @@\n using UnityEngine;\r\n using System;\r\n using JellyGunner;\r\n \r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n+\r\n public class TargetBlock : MonoBehaviour\r\n {\r\n     public BlockColor ColorType { get; private set; }\r\n     public int HP { get; private set; }\r\n-    public Vector2Int GridPosition { get; private set; } // Base coordinate (bottom-left)\r\n-    public int LayerIndex { get; private set; }\r\n-    public Vector2Int Size { get; private set; } // Width x Height in grid cells\r\n+    \r\n+    // Column (Horizontal index) and Depth (Vertical index in the column)\r\n+    public int ColumnIndex { get; private set; }\r\n+    public int DepthIndex { get; private set; }\r\n \r\n     private Action<TargetBlock> _onDestroyed;\r\n \r\n-    public void Initialize(BlockConfigSO.BlockDefinition config, int x, int y, int layer, Action<TargetBlock> onDestroyedCallback)\r\n+    public void Initialize(BlockConfigSO.BlockDefinition config, int col, int depth, Action<TargetBlock> onDestroyedCallback)\r\n     {\r\n         ColorType = config.ColorEnum;\r\n         HP = config.BaseHP;\r\n-        Size = config.Size;\r\n-        GridPosition = new Vector2Int(x, y);\r\n-        LayerIndex = layer;\r\n+        ColumnIndex = col;\r\n+        DepthIndex = depth;\r\n         _onDestroyed = onDestroyedCallback;\r\n \r\n-        // Visual Setup\r\n         var renderer = GetComponent<Renderer>();\r\n         if (renderer != null)\r\n         {\r\n             renderer.material.color = config.VisualColor;\r\n         }\r\n     }\r\n \r\n+    public void UpdateGridPosition(int newDepth, Vector3 worldPosition)\r\n+    {\r\n+        DepthIndex = newDepth;\r\n+        LeanTween.cancel(gameObject);\r\n+        LeanTween.move(gameObject, worldPosition, 0.3f).setEaseOutQuad();\r\n+    }\r\n+\r\n     public void TakeDamage(int amount)\r\n     {\r\n         HP -= amount;\r\n         if (HP <= 0)\r\n@@ -37,16 +90,19 @@\n             Die();\r\n         }\r\n         else\r\n         {\r\n-            // Optional: Play hit effect / wobble\r\n             transform.localScale = Vector3.one * 0.9f;\r\n             LeanTween.scale(gameObject, Vector3.one, 0.2f).setEaseOutBack();\r\n         }\r\n     }\r\n \r\n     private void Die()\r\n     {\r\n         _onDestroyed?.Invoke(this);\r\n-        Destroy(gameObject);\r\n+        LeanTween.cancel(gameObject);\r\n+        \r\n+        // Simple death effect before destroying\r\n+        transform.localScale = Vector3.zero; \r\n+        Destroy(gameObject, 0.1f);\r\n     }\r\n }\r\n"
                }
            ],
            "date": 1771535637238,
            "name": "Commit-0",
            "content": "using UnityEngine;\r\nusing System;\r\nusing JellyGunner;\r\n\r\npublic class TargetBlock : MonoBehaviour\r\n{\r\n    public BlockColor ColorType { get; private set; }\r\n    public int HP { get; private set; }\r\n    public Vector2Int GridPosition { get; private set; } // Base coordinate (bottom-left)\r\n    public int LayerIndex { get; private set; }\r\n    public Vector2Int Size { get; private set; } // Width x Height in grid cells\r\n\r\n    private Action<TargetBlock> _onDestroyed;\r\n\r\n    public void Initialize(BlockConfigSO.BlockDefinition config, int x, int y, int layer, Action<TargetBlock> onDestroyedCallback)\r\n    {\r\n        ColorType = config.ColorEnum;\r\n        HP = config.BaseHP;\r\n        Size = config.Size;\r\n        GridPosition = new Vector2Int(x, y);\r\n        LayerIndex = layer;\r\n        _onDestroyed = onDestroyedCallback;\r\n\r\n        // Visual Setup\r\n        var renderer = GetComponent<Renderer>();\r\n        if (renderer != null)\r\n        {\r\n            renderer.material.color = config.VisualColor;\r\n        }\r\n    }\r\n\r\n    public void TakeDamage(int amount)\r\n    {\r\n        HP -= amount;\r\n        if (HP <= 0)\r\n        {\r\n            Die();\r\n        }\r\n        else\r\n        {\r\n            // Optional: Play hit effect / wobble\r\n            transform.localScale = Vector3.one * 0.9f;\r\n            LeanTween.scale(gameObject, Vector3.one, 0.2f).setEaseOutBack();\r\n        }\r\n    }\r\n\r\n    private void Die()\r\n    {\r\n        _onDestroyed?.Invoke(this);\r\n        Destroy(gameObject);\r\n    }\r\n}\r\n"
        }
    ]
}